<!DOCTYPE html>
<html lang="en">
<head>

  <!-- Basic Page Needs
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta charset="utf-8">
  <title>Iaido Clube de Oeiras</title>
  <meta name="description" content="">
  <meta name="author" content="">

  <!-- Mobile Specific Metas
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- FONT
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
<link href='https://fonts.googleapis.com/css?family=Roboto:400,700,300' rel='stylesheet' type='text/css'>

  <!-- CSS
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/skeleton.css">
  <link rel="stylesheet" href="css/master.css" >
  <link rel="stylesheet" href="css/typo.css" >

  <!-- Favicon
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="icon" type="image/png" href="images/favicon.png">

</head>
<body>

  <!-- Primary Page Layout
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
   <div class="section main-header with-bg">
    <div class="centered">
      <h3 class="section-logo">
        <img class="crest" src="images/crest.svg">
      </h3>
      <h2 class="section-heading">Iaido Clube de Oeiras</h3>
    </div>
  </div>

  <div class="navigation">
      <div class="section-logo centered">
        <img class="crest" src="images/crest.svg">
      </div>
      <div class="container">
        <div class="row">
          <div class="twelve columns">
            <nav>
              <ul>
                <li><a href="#noticias" class="nav-active" href="#">Noticias</a></li>
                <li><a href="#historia">História</a></li>
                <li><a href="#aulas">Aulas</a></li>
                <li><a href="#contactos">Contactos</a></li>
              </ul>
            </nav> 
          </div>
        </div>
      </div>
    </div>

  <div class="spacer-section">
  &nbsp;
  </div>

  <div id="noticias" class="container">
  <span class="spacer"> &nbsp;</span>
          
    <div class="row">
      <div class="eleven column">
        <h3 class="centered">Noticias
        </h3>

        <div class="article">
          <h4>Ola mundo!</h4>
          <div class="article-content">
            <p>This index.html page is a placeholder with the CSS, font and favicon. It's just waiting for you to add some content! If you need some help hit up the <a href="http://www.getskeleton.com">Skeleton documentation</a>.</p>
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
          </div>
        </div>

        <!-- End of Article -->

        <div class="article">
          <h4>Ola mundo!</h4>
          <div class="article-content">
            <p>This index.html page is a placeholder with the CSS, font and favicon. It's just waiting for you to add some content! If you need some help hit up the <a href="http://www.getskeleton.com">Skeleton documentation</a>.</p>
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
          </div>
        </div>

        <!-- End of Article -->

      </div>
    </div>
  </div>

  <hr/>

  <div id="historia" class="section centered">
  <span class="spacer"> &nbsp;</span>
    <div class="container">
        <h3>
        <span > &nbsp;</span>
        História</h3>
        <p>This index.html page is a placeholder with the CSS, font and favicon. It's   just waiting for you to add some content! If you need some help hit up the <a href  ="http://www.getskeleton.com">Skeleton documentation</a>.</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
        tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
        quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
        consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
        cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
        proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
        tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
        quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
        consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
        cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
        proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
    </div>
  </div>
<br/>
  <hr/>

  <div id="aulas" class="section centered">
  <span class="spacer"> &nbsp;</span>
    <div class="container">
      <div class="row">
        <h3>Aulas</h3>
      </div>
      <div class="row">
        <div class="one-half column">
          <div class="span8">
            <iframe width="100%" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.co.uk/maps?f=q&source=s_q&hl=en&geocode=&q=15+Springfield+Way,+Hythe,+CT21+5SH&aq=t&sll=52.8382,-2.327815&sspn=8.047465,13.666992&ie=UTF8&hq=&hnear=15+Springfield+Way,+Hythe+CT21+5SH,+United+Kingdom&t=m&z=14&ll=51.077429,1.121722&output=embed"></iframe>
          </div>
          
        </div>
         <div class="one-half column">
         <div class="row">
          <h4>Horario</h4>
          <p>This index.html page is a placeholder with the CSS, font and favicon.  It's   just waiting for you to add some content! If you need some help   hit up the <a href  ="http://www.getskeleton.com">Skeleton documentation  </a>.</p>
        </div>
        </div>
        <div class="row">
          <h4>Horario</h4>
          <p>This index.html page is a placeholder with the CSS, font and favicon.  It's   just waiting for you to add some content! If you need some help   hit up the <a href  ="http://www.getskeleton.com">Skeleton documentation  </a>.</p>
        </div>
      </div>
    </div>
  </div>

  <hr/>

  <div id="contactos" class="section centered">
  <span class="spacer"> &nbsp;</span>
    <div class="container">
        <h3>Contactos</h3>
        <p>This index.html page is a placeholder with the CSS, font and favicon. It's   just waiting for you to add some content! If you need some help hit up the <a href  ="http://www.getskeleton.com">Skeleton documentation</a>.</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
        tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
        quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
        consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
        cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
        proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
    </div>
  </div>

<footer class="with-bg">
  &nbsp;
</footer>

<!-- End Document
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
<script src="js/zepto.min.js"></script>
<script type="text/javascript">
  function handleScroll(){

  // check that this is a relatively modern browser
  if (window.XMLHttpRequest){

    // determine the distance scrolled down the page
    var offset = window.pageYOffset
               ? window.pageYOffset
               : document.documentElement.scrollTop;

    // set the appropriate class on the navigation
    var logo = $(".main-header");
    var navigation = $(".navigation");

    if (offset > 212) {
      navigation.addClass('fixed');
    } else {
      navigation.removeClass('fixed');
    }

  }

}

Zepto(function($){
// add the scroll event listener
if (window.addEventListener){
  window.addEventListener('scroll', handleScroll, false);
}else{
  window.attachEvent('onscroll', handleScroll);
}

/**
     * This part handles the highlighting functionality.
     * We use the scroll functionality again, some array creation and 
     * manipulation, class adding and class removing, and conditional testing
     */
    var aChildren = $("nav li").children(); // find the a children of the list items
    var aArray = []; // create the empty aArray
    for (var i=0; i < aChildren.length; i++) {    
        var aChild = aChildren[i];
        var ahref = $(aChild).attr('href');
        aArray.push(ahref);
    } // this for loop fills the aArray with attribute href values

    $(window).scroll(function(){
        var windowPos = $(window).scrollTop(); // get the offset of the window from the top of page
        var windowHeight = $(window).height(); // get the height of the window
        var docHeight = $(document).height();

        console.log(aArray);
        for (var i=0; i < aArray.length; i++) {
            var theID = aArray[i];
            var divPos = $(theID).offset().top; // get the offset of the div from the top of page
            var divHeight = $(theID).height(); // get the height of the div in question
            if (windowPos >= divPos && windowPos < (divPos + divHeight)) {
                $("a[href='" + theID + "']").addClass("nav-active");
            } else {
                $("a[href='" + theID + "']").removeClass("nav-active");
            }
        }

        if(windowPos + windowHeight == docHeight) {
            if (!$("nav li:last-child a").hasClass("nav-active")) {
                var navActiveCurrent = $(".nav-active").attr("href");
                $("a[href='" + navActiveCurrent + "']").removeClass("nav-active");
                $("nav li:last-child a").addClass("nav-active");
            }
        }
    });

})
</script>
</body>
</html>
